<!DOCTYPE html>
<html lang="uz">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Labirint Oâ€˜yini</title>
  <style>
    body { 
      margin: 0; 
      font-family: Arial, sans-serif; 
      background: #111; 
      color: white; 
      text-align: center; 
    }
    #menu, #info, #credits, #gameContainer { display: none; }
    button { 
      padding: 10px 20px; 
      margin: 10px; 
      font-size: 18px; 
      border-radius: 10px; 
      cursor: pointer; 
    }
    canvas { background: black; display: block; margin: 20px auto; }
    #hud {
      position: absolute;
      top: 10px; left: 10px;
      color: yellow;
      font-size: 18px;
      text-align: left;
    }
    #timer {
      position: absolute;
      top: 10px; right: 10px;
      color: red;
      font-size: 18px;
    }
  </style>
</head>
<body>

  <!-- Menyu -->
  <div id="menu">
    <h1>ğŸ® Labirint Oâ€˜yini ğŸ®</h1>
    <button onclick="showGame()">Oâ€˜yin Boshlash</button>
    <button onclick="showInfo()">â„¹ï¸ Oâ€˜yin haqida</button>
    <button onclick="showCredits()">ğŸ‘¨â€ğŸ’» Yaratuvchilar</button>
  </div>

  <!-- Oâ€˜yin haqida -->
  <div id="info">
    <h2>â„¹ï¸ Oâ€˜yin haqida</h2>
    <p>Bu oâ€˜yinda siz odamchani labirintdan olib chiqishingiz kerak. 
    Har bosqich qiyinlashib boradi. Vaqt tugashidan oldin chiqishingiz kerak!</p>
    <button onclick="backToMenu()">â¬…ï¸ Ortga</button>
  </div>

  <!-- Yaratuvchilar -->
  <div id="credits">
    <h2>ğŸ‘¨â€ğŸ’» Yaratuvchilar</h2>
    <p>Oâ€˜yin yaratuvchisi: <b>Muhammad Yusuf</b> <br>
    2008/09/06 kuni tugâ€˜ilgan. <br>
    Bu oâ€˜yinni qiziqib yaratdi.</p>
    <p>ğŸ‘‰ <b>YUSUF_S.D</b> INSTAGRAM PROFILIGA OBUNA BOâ€˜LING ğŸ‘ˆ</p>
    <button onclick="backToMenu()">â¬…ï¸ Ortga</button>
  </div>

  <!-- Oâ€˜yin -->
  <div id="gameContainer">
    <h2 id="playerName"></h2>
    <div id="hud">Ball: <span id="score">0</span> | Level: <span id="level">1</span></div>
    <div id="timer">Vaqt: <span id="time">900</span>s</div>
    <canvas id="gameCanvas" width="400" height="400"></canvas>
  </div>

<script>
  let menu = document.getElementById("menu");
  let info = document.getElementById("info");
  let credits = document.getElementById("credits");
  let gameContainer = document.getElementById("gameContainer");

  let canvas = document.getElementById("gameCanvas");
  let ctx = canvas.getContext("2d");

  let score = 0, level = 1, timeLeft = 900; // 15 daqiqa
  let timerInterval;
  let player = {x: 1, y: 1};
  let maze, exit;
  let cellSize = 40;
  let playerName = "";

  // Menyuni koâ€˜rsatish
  function showMenu() {
    menu.style.display = "block";
    info.style.display = "none";
    credits.style.display = "none";
    gameContainer.style.display = "none";
  }
  function showInfo() {
    menu.style.display = "none";
    info.style.display = "block";
  }
  function showCredits() {
    menu.style.display = "none";
    credits.style.display = "block";
  }
  function backToMenu() { showMenu(); }

  // Oâ€˜yin boshlash
  function showGame() {
    playerName = prompt("Persanaj ismini kiriting:");
    if (!playerName) playerName = "Oâ€˜yinchi";
    document.getElementById("playerName").innerText = "ğŸ¤©Olgâ€˜a " + playerName + " ğŸ¤©";

    menu.style.display = "none";
    gameContainer.style.display = "block";

    startGame();
  }

  function startGame() {
    score = 0;
    level = 1;
    timeLeft = 900;
    generateMaze(level);
    draw();

    timerInterval = setInterval(() => {
      timeLeft--;
      document.getElementById("time").innerText = timeLeft;
      if (timeLeft <= 0) {
        clearInterval(timerInterval);
        alert("â° Vaqt tugadi! Endi darsingni qil ğŸ˜");
        showMenu();
      }
    }, 1000);
  }

  // Oddiy labirint yaratish
  function generateMaze(lv) {
    maze = [
      [1,1,1,1,1,1,1,1,1,1],
      [1,0,0,0,1,0,0,0,0,1],
      [1,0,1,0,1,0,1,1,0,1],
      [1,0,1,0,0,0,0,1,0,1],
      [1,0,1,1,1,1,0,1,0,1],
      [1,0,0,0,0,0,0,1,0,1],
      [1,1,1,1,1,0,1,1,0,1],
      [1,0,0,0,0,0,1,0,0,1],
      [1,0,1,1,1,0,0,0,2,1],
      [1,1,1,1,1,1,1,1,1,1],
    ];
    player = {x:1, y:1};
    exit = {x:8, y:8};
  }

  // Chizish
  function draw() {
    ctx.clearRect(0,0,canvas.width,canvas.height);
    for (let y=0; y<maze.length; y++) {
      for (let x=0; x<maze[y].length; x++) {
        if (maze[y][x] === 1) {
          ctx.fillStyle = "blue";
          ctx.fillRect(x*cellSize, y*cellSize, cellSize, cellSize);
        } else if (maze[y][x] === 2) {
          ctx.fillStyle = "green";
          ctx.fillRect(x*cellSize, y*cellSize, cellSize, cellSize);
        }
      }
    }
    // Player
    ctx.fillStyle = "yellow";
    ctx.beginPath();
    ctx.arc(player.x*cellSize+20, player.y*cellSize+20, 15, 0, Math.PI*2);
    ctx.fill();
  }

  // Harakat
  function move(dx, dy) {
    let nx = player.x + dx;
    let ny = player.y + dy;
    if (maze[ny][nx] !== 1) {
      player.x = nx;
      player.y = ny;
    }
    if (nx === exit.x && ny === exit.y) {
      score += 10;
      level++;
      document.getElementById("score").innerText = score;
      document.getElementById("level").innerText = level;
      alert("ğŸ‰ Keyingi bosqich!");
      generateMaze(level);
    }
    draw();
  }

  // Klaviatura
  document.addEventListener("keydown", e => {
    if (e.key === "ArrowUp") move(0,-1);
    if (e.key === "ArrowDown") move(0,1);
    if (e.key === "ArrowLeft") move(-1,0);
    if (e.key === "ArrowRight") move(1,0);
  });

  // Telefon uchun swipe
  let startX, startY;
  canvas.addEventListener("touchstart", e => {
    let t = e.touches[0];
    startX = t.clientX;
    startY = t.clientY;
  });
  canvas.addEventListener("touchend", e => {
    let t = e.changedTouches[0];
    let dx = t.clientX - startX;
    let dy = t.clientY - startY;
    if (Math.abs(dx) > Math.abs(dy)) {
      if (dx > 0) move(1,0); else move(-1,0);
    } else {
      if (dy > 0) move(0,1); else move(0,-1);
    }
  });

  showMenu();
</script>
</body>
</html>