<!DOCTYPE html>
<html lang="uz">
<head>
  <meta charset="UTF-8">
  <title>Labirint O‘yini</title>
  <style>
    body { margin: 0; font-family: Arial; text-align: center; background: #111; color: white; }
    canvas { background: black; display: block; margin: 10px auto; }
    .menu, .game, .info, .creators { display: none; }
    button { margin: 5px; padding: 10px 20px; font-size: 16px; border-radius: 8px; }
    #controls { position: fixed; bottom: 20px; left: 50%; transform: translateX(-50%); }
    #controls button { font-size: 24px; margin: 3px; padding: 15px; }
    #hud { position: absolute; top: 10px; left: 10px; text-align: left; }
  </style>
</head>
<body>

<div class="menu" id="menu">
  <h1>🌀 Labirint O‘yini 🌀</h1>
  <input type="text" id="playerName" placeholder="Ismingizni kiriting">
  <br><br>
  <button onclick="startGame()">O‘yinni boshlash</button>
  <button onclick="showInfo()">ℹ️ O‘yin haqida</button>
  <button onclick="showCreators()">👨‍💻 Yaratuvchilar</button>
</div>

<div class="info" id="info">
  <h2>ℹ️ O‘yin haqida</h2>
  <p>Bu o‘yinda siz labirintdan chiqishingiz kerak.  
  Har bosqichda labirint yanada murakkab bo‘ladi.  
  Har chiqishda +10 ball qo‘lga kiritasiz.  
  Vaqt 15 daqiqa.</p>
  <button onclick="backToMenu()">⬅️ Ortga</button>
</div>

<div class="creators" id="creators">
  <h2>👨‍💻 Yaratuvchilar</h2>
  <p>O‘yin yaratuvchisi: <b>Muhammad Yusuf</b><br>
  2008/09/06 kuni tug‘ilgan va bu o‘yinni qiziqib yaratdi.</p>
  <p>👉 <b>YUSUF_S.D INSTAGRAM PROFILIGA OBUNA BO‘LING</b></p>
  <button onclick="backToMenu()">⬅️ Ortga</button>
</div>

<div class="game" id="game">
  <div id="hud">
    <div id="greeting"></div>
    <div>🏆 Ball: <span id="score">0</span></div>
    <div>📊 Level: <span id="level">1</span></div>
    <div>⏰ Vaqt: <span id="timer">15:00</span></div>
  </div>
  <canvas id="gameCanvas" width="400" height="400"></canvas>
  <div id="controls">
    <button onclick="moveUp()">⬆️</button><br>
    <button onclick="moveLeft()">⬅️</button>
    <button onclick="moveDown()">⬇️</button>
    <button onclick="moveRight()">➡️</button>
  </div>
</div>

<script>
let canvas = document.getElementById("gameCanvas");
let ctx = canvas.getContext("2d");

let mazeSize = 10;
let cellSize = canvas.width / mazeSize;
let player = {x:0, y:0};
let exit = {x: mazeSize-1, y: mazeSize-1};
let score = 0;
let level = 1;
let timer = 15*60; // 15 daqiqa
let timerInterval;
let playerName = "";

function showMenu(){ document.getElementById("menu").style.display="block"; }
function backToMenu(){ hideAll(); showMenu(); }
function showInfo(){ hideAll(); document.getElementById("info").style.display="block"; }
function showCreators(){ hideAll(); document.getElementById("creators").style.display="block"; }
function hideAll(){
  document.getElementById("menu").style.display="none";
  document.getElementById("game").style.display="none";
  document.getElementById("info").style.display="none";
  document.getElementById("creators").style.display="none";
}

function startGame(){
  playerName = document.getElementById("playerName").value || "O‘yinchi";
  document.getElementById("greeting").innerText = "🤩 Olg‘a, " + playerName + "! 🤩";
  hideAll();
  document.getElementById("game").style.display="block";
  resetGame();
  startTimer();
}

function resetGame(){
  player = {x:0,y:0};
  exit = {x:mazeSize-1, y:mazeSize-1};
  drawGame();
}

function startTimer(){
  clearInterval(timerInterval);
  timerInterval = setInterval(()=>{
    timer--;
    let min = Math.floor(timer/60);
    let sec = timer%60;
    document.getElementById("timer").innerText = `${min}:${sec<10?"0":""}${sec}`;
    if(timer<=0){
      clearInterval(timerInterval);
      alert("⏰ Vaqt tugadi, endi darsingni qil!");
      backToMenu();
    }
  },1000);
}

function drawGame(){
  ctx.fillStyle="black";
  ctx.fillRect(0,0,canvas.width,canvas.height);

  // oddiy labirint (qiyinroq qilish mumkin bosqichda)
  ctx.fillStyle="white";
  for(let i=0;i<mazeSize;i++){
    for(let j=0;j<mazeSize;j++){
      ctx.strokeRect(i*cellSize, j*cellSize, cellSize, cellSize);
    }
  }

  // player
  ctx.fillStyle="lime";
  ctx.fillRect(player.x*cellSize, player.y*cellSize, cellSize, cellSize);

  // exit
  ctx.fillStyle="gold";
  ctx.fillRect(exit.x*cellSize, exit.y*cellSize, cellSize, cellSize);
}

function move(dx,dy){
  let nx=player.x+dx, ny=player.y+dy;
  if(nx>=0 && ny>=0 && nx<mazeSize && ny<mazeSize){
    player.x=nx; player.y=ny;
    drawGame();
    if(player.x==exit.x && player.y==exit.y){
      score+=10; level++; mazeSize+=2; cellSize=canvas.width/mazeSize;
      document.getElementById("score").innerText=score;
      document.getElementById("level").innerText=level;
      alert("🎉 Bosqich tugadi! Keyingi bosqich!");
      resetGame();
    }
  }
}

function moveUp(){ move(0,-1); }
function moveDown(){ move(0,1); }
function moveLeft(){ move(-1,0); }
function moveRight(){ move(1,0); }

showMenu();
</script>
</body>
</html>
